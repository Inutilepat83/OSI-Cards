// =====================================================================
// SECTION ANIMATIONS - Unified Animation System
// =====================================================================
//
// Consolidated animation system for all sections.
// All hover effects use shadow/color changes only (no transforms).
// Easy to maintain and consistent across all sections.
//
// =====================================================================

@use "design-tokens" as *;

// =====================================================================
// METAL REFLECTION EFFECT
// =====================================================================
//
// Adds a subtle metallic reflection effect on hover with sweeping animation.
// Direction can be left-to-right (ltr) or right-to-left (rtl).
// The effect sweeps across the element like light on metal.
//

// Keyframe animation for metal sweep effect - fully vertical, more discrete
@keyframes metal-sweep-ltr {
  0% {
    transform: translateX(-100%);
    opacity: 0;
  }
  20% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.5;
  }
  80% {
    opacity: 0.3;
  }
  100% {
    transform: translateX(200%);
    opacity: 0;
  }
}

@keyframes metal-sweep-rtl {
  0% {
    transform: translateX(200%);
    opacity: 0;
  }
  20% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.5;
  }
  80% {
    opacity: 0.3;
  }
  100% {
    transform: translateX(-100%);
    opacity: 0;
  }
}

@mixin section-metal-reflection($direction: "ltr") {
  position: relative;
  overflow: hidden;

  // Use ::before for metal reflection to avoid conflicts with ::after used by components
  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 1;
    opacity: 0;
    border-radius: inherit;
    // Reset animation state
    animation: none;

    @if $direction == "ltr" {
      // Left-to-right reflection with sweep animation - more discrete
      background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.2) 20%,
        rgba(255, 255, 255, 0.3) 40%,
        rgba(255, 255, 255, 0.2) 60%,
        transparent 100%
      );
      width: 50%;
    } @else {
      // Right-to-left reflection with sweep animation - more discrete
      background: linear-gradient(
        270deg,
        transparent 0%,
        rgba(255, 255, 255, 0.2) 20%,
        rgba(255, 255, 255, 0.3) 40%,
        rgba(255, 255, 255, 0.2) 60%,
        transparent 100%
      );
      width: 50%;
    }

    // Use overlay blend mode for metallic appearance
    mix-blend-mode: overlay;
  }

  // Trigger animation on hover - each item independently
  &:hover::before {
    opacity: 1;
    // Play animation on hover - restart animation each time for this specific item
    @if $direction == "ltr" {
      animation: metal-sweep-ltr 0.23s ease-out forwards;
    } @else {
      animation: metal-sweep-rtl 0.23s ease-out forwards;
    }
  }

  // Reset animation when hover ends so it can play again
  &:not(:hover)::before {
    animation: none;
    opacity: 0;
  }

  @media (prefers-reduced-motion: reduce) {
    &::before {
      display: none;
    }
  }
}

// =====================================================================
// STANDARD CARD HOVER EFFECT
// =====================================================================
//
// Primary hover effect for section cards.
// Uses shadow and color transitions only (no transforms).
//

@mixin section-card-hover {
  // Use standardized transition token
  transition: var(--osi-section-item-transition);

  // Add metal reflection effect (default left-to-right)
  @include section-metal-reflection("ltr");

  &:hover {
    // Keep background unchanged - only border and shadow change
    // background: var(--osi-section-item-background-hover); // Removed - background stays the same
    border-color: var(--osi-section-item-border-hover-enhanced-color);
    box-shadow: var(--osi-section-item-shadow-hover-enhanced);
  }

  &:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    box-shadow:
      var(--shadow-lg),
      0 0 0 4px rgba(var(--accent-rgb, 255, 121, 0), 0.1);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;

    &:hover {
      box-shadow: var(--shadow-md);
    }
  }
}

// =====================================================================
// ELEVATED CARD HOVER (Stronger Shadow)
// =====================================================================
//
// For cards that need more prominent hover feedback.
//

@mixin section-card-hover-elevated {
  transition:
    box-shadow var(--duration-slow) var(--ease-out),
    background var(--duration-slow) var(--ease-out),
    border-color var(--duration-slow) var(--ease-out);

  // Add metal reflection effect (default left-to-right)
  @include section-metal-reflection("ltr");

  &:hover {
    box-shadow: var(--shadow-xl);
    background: var(--osi-section-item-background-hover);
    border-color: var(--osi-section-item-border-hover);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// =====================================================================
// SUBTLE CARD HOVER (Lighter Shadow)
// =====================================================================
//
// For cards that need minimal hover feedback.
//

@mixin section-card-hover-subtle {
  transition:
    box-shadow var(--duration-base) var(--ease-out),
    background var(--duration-base) var(--ease-out);

  // Add metal reflection effect (default left-to-right)
  @include section-metal-reflection("ltr");

  &:hover {
    box-shadow: var(--shadow-md);
    background: var(--osi-section-item-background-hover);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// =====================================================================
// LIST ITEM HOVER
// =====================================================================
//
// For list items - background and color changes only.
//

@mixin section-list-item-hover {
  // Use standardized transition token
  transition: var(--osi-section-item-transition);

  // Add metal reflection effect (default left-to-right)
  @include section-metal-reflection("ltr");

  &:hover {
    background: var(--osi-section-item-background-hover);
    color: var(--foreground);
    border-color: var(--osi-section-item-border-hover);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// =====================================================================
// INTERACTIVE SURFACE HOVER
// =====================================================================
//
// For clickable surfaces - color transitions only.
//

@mixin section-interactive-hover {
  transition:
    background var(--duration-base) var(--ease-out),
    color var(--duration-base) var(--ease-out),
    border-color var(--duration-base) var(--ease-out);

  &:hover {
    background: color-mix(in srgb, var(--osi-section-item-background) 90%, var(--foreground) 10%);
    color: var(--accent);
  }

  &:active {
    background: color-mix(in srgb, var(--osi-section-item-background) 85%, var(--foreground) 15%);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// =====================================================================
// GLOW HOVER EFFECT
// =====================================================================
//
// Adds a subtle glow effect on hover using box-shadow.
//

@mixin section-glow-hover {
  transition:
    box-shadow var(--duration-slow) var(--ease-out),
    border-color var(--duration-slow) var(--ease-out);

  &:hover {
    box-shadow:
      var(--shadow-lg),
      0 0 20px rgba(var(--accent-rgb, 255, 121, 0), 0.2);
    border-color: var(--accent);
  }

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// =====================================================================
// ACCENT LINE HOVER
// =====================================================================
//
// Shows an accent line on hover (top border effect).
//

@mixin section-accent-line-hover {
  position: relative;

  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent) 0%, transparent 100%);
    opacity: 0;
    transition: opacity var(--duration-base) var(--ease-out);
    border-radius: var(--osi-section-item-border-radius) var(--osi-section-item-border-radius) 0 0;
  }

  &:hover::before {
    opacity: 0.8;
  }

  @media (prefers-reduced-motion: reduce) {
    &::before {
      display: none;
    }
  }
}

// =====================================================================
// ENTRANCE ANIMATIONS - DEPRECATED
// =====================================================================
// @deprecated Use @keyframes item-stream from _sections-base.scss instead
// This keyframe is kept for backward compatibility.

@keyframes section-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes section-fade-in-up {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

// =====================================================================
// STAGGER ANIMATION MIXINS
// =====================================================================
//
// For animating lists of items with staggered delays.
//

// =====================================================================
// ANIMATION MIXINS - DEPRECATED
// =====================================================================
// @deprecated Use @include item-animation from _sections-base.scss instead
// These mixins are kept for backward compatibility but redirect to the standard mixin.

@mixin section-item-animation {
  @include item-animation;
  @warn "section-item-animation from _section-animations.scss is deprecated. Use @include item-animation from _sections-base.scss instead.";
}

@mixin legacy-item-animation {
  @include item-animation;
  @warn "legacy-item-animation from _section-animations.scss is deprecated. Use @include item-animation from _sections-base.scss instead.";
}

@mixin legacy-field-animation {
  @include item-animation;
  @warn "legacy-field-animation from _section-animations.scss is deprecated. Use @include item-animation from _sections-base.scss instead.";
}

// =====================================================================
// REDUCED MOTION SUPPORT
// =====================================================================
//
// Global reduced motion rules for all section animations.
//

@media (prefers-reduced-motion: reduce) {
  .unified-card,
  .section-card,
  [class*="__card"],
  [class*="-card"],
  [class*="__item"],
  [class*="-item"],
  .metric-card,
  .list-item,
  .analytics-card {
    transition: none !important;
    animation: none !important;

    &:hover {
      transform: none !important;
    }
  }
}
