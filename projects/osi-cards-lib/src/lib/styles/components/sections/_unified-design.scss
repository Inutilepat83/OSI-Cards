/* ============================================================================
   UNIFIED DESIGN SYSTEM - Section Consistency
   ============================================================================

   This file MUST be imported LAST to override all individual section styles.

   PROBLEMS FIXED:
   1. Sections have different background colors
   2. Animations are inconsistent
   3. Card backgrounds don't match theme
   4. Light/dark theme switching is broken

   SOLUTION:
   - Single source of truth for all backgrounds
   - Unified animation system
   - Theme-aware CSS variables only
   ============================================================================ */

/* ============================================================================
   1. UNIFIED BACKGROUND COLORS
   ============================================================================ */

/* Reset ALL hardcoded section backgrounds to use theme variables */
.ai-section,
.ai-section--info,
.ai-section--analytics,
.ai-section--contact-card,
.ai-section--network-card,
.ai-section--map,
.ai-section--financials,
.ai-section--event,
.ai-section--list,
.ai-section--chart,
.ai-section--product,
.ai-section--solutions,
.ai-section--overview,
.ai-section--quotation,
.ai-section--text-reference,
.ai-section--brand-colors,
.ai-section--news,
.ai-section--social-media,
.ai-section--fallback {
  /* Use ONLY the theme variable - no hardcoded colors */
  --section-background: var(--theme-section-surface, var(--section-surface)) !important;
  --section-background-hover: var(--theme-section-surface-hover, var(--section-surface-hover)) !important;
}

/* Section container (.masonry-item) - unified background */
.masonry-item {
  background: var(--section-surface, var(--card-section-bg)) !important;

  &:hover {
    background: var(--section-surface-hover, var(--card-section-bg)) !important;
  }
}

/* Section items (cards inside sections) - unified background */
.section-card,
.info-row,
.overview-card,
.analytics-metric,
.contact-card,
.event-card,
.event-item,
.financial-card,
.financial-metric,
.solution-card,
.solution-item,
.map-card,
.network-card,
.product-card,
.product-entry,
.product-reference,
.chart-card,
.fallback-card,
.fallback-field,
[class*="-card"]:not([class*="__"]):not(.ai-card-surface),
[class*="-metric"]:not([class*="__"]),
[class*="-item"]:not([class*="__"]):not(.masonry-item) {
  background: var(--section-item-background) !important;

  &:hover {
    background: var(--section-item-background-hover) !important;
  }
}

/* AI Card (hero) - unified background */
.ai-card-surface {
  background: var(--ai-card-background) !important;

  &:hover {
    background: var(--ai-card-background-hover) !important;
  }
}

/* ============================================================================
   2. UNIFIED ANIMATIONS
   ============================================================================ */

/* Consistent animation variables */
:root,
:host {
  --osi-animation-duration: 0.3s;
  --osi-animation-easing: cubic-bezier(0.4, 0, 0.2, 1);
  --osi-animation-stagger: 50ms;
  --osi-animation-hover-scale: 1.01;
  --osi-animation-hover-lift: -2px;
}

/* Unified transition for all sections */
.ai-section,
.masonry-item {
  transition:
    background-color var(--osi-animation-duration) var(--osi-animation-easing),
    box-shadow var(--osi-animation-duration) var(--osi-animation-easing),
    border-color var(--osi-animation-duration) var(--osi-animation-easing) !important;
}

/* Unified transition for all cards/items */
.section-card,
.info-row,
.overview-card,
.analytics-metric,
.contact-card,
.event-card,
.event-item,
.financial-card,
.financial-metric,
.solution-card,
.solution-item,
.map-card,
.network-card,
.product-card,
.product-entry,
.product-reference,
.chart-card,
.fallback-card,
.fallback-field,
[class*="-card"]:not([class*="__"]):not(.ai-card-surface),
[class*="-metric"]:not([class*="__"]),
[class*="-item"]:not([class*="__"]):not(.masonry-item) {
  transition:
    background-color var(--osi-animation-duration) var(--osi-animation-easing),
    box-shadow var(--osi-animation-duration) var(--osi-animation-easing),
    border-color var(--osi-animation-duration) var(--osi-animation-easing),
    transform var(--osi-animation-duration) var(--osi-animation-easing) !important;
}

/* Entrance animation - staggered fade in */
@keyframes osiSectionFadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.masonry-item {
  animation: osiSectionFadeIn var(--osi-animation-duration) var(--osi-animation-easing) backwards;

  /* Staggered animation delay based on nth-child */
  @for $i from 1 through 20 {
    &:nth-child(#{$i}) {
      animation-delay: calc(#{$i} * var(--osi-animation-stagger));
    }
  }
}

/* ============================================================================
   3. THEME DEFINITIONS - Single Source of Truth
   ============================================================================ */

/* DARK THEME (Night) */
:root[data-theme='night'],
[data-theme='night'],
:host-context([data-theme='night']) {
  /* Background hierarchy */
  --osi-bg-base: #0a0a0a;
  --osi-bg-elevated: #111111;
  --osi-bg-surface: #161616;
  --osi-bg-card: #1a1a1a;
  --osi-bg-item: #1e1e1e;

  /* Border colors */
  --osi-border-subtle: rgba(255, 255, 255, 0.06);
  --osi-border-default: rgba(255, 255, 255, 0.1);
  --osi-border-hover: rgba(255, 121, 0, 0.3);

  /* Text colors */
  --osi-text-primary: rgba(255, 255, 255, 0.95);
  --osi-text-secondary: rgba(255, 255, 255, 0.7);
  --osi-text-muted: rgba(255, 255, 255, 0.5);

  /* Apply to theme variables */
  --background: var(--osi-bg-base);
  --section-surface: var(--osi-bg-surface);
  --section-surface-hover: var(--osi-bg-card);
  --section-item-background: var(--osi-bg-item);
  --section-item-background-hover: var(--osi-bg-card);
  --ai-card-background: var(--osi-bg-elevated);
  --ai-card-background-hover: var(--osi-bg-surface);
  --card-section-bg: var(--osi-bg-surface);

  /* Border theme */
  --section-border-color: var(--osi-border-subtle);
  --section-item-border-color: var(--osi-border-default);
  --card-border-color: var(--osi-border-subtle);

  /* Shadow for dark theme - subtle glow */
  --section-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
  --section-box-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.5);
  --section-item-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  --section-item-box-shadow-hover: 0 4px 8px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 121, 0, 0.1);
}

/* LIGHT THEME (Day) */
:root[data-theme='day'],
[data-theme='day'],
:host-context([data-theme='day']) {
  /* Background hierarchy */
  --osi-bg-base: #ffffff;
  --osi-bg-elevated: #fafafa;
  --osi-bg-surface: #f5f5f5;
  --osi-bg-card: #ffffff;
  --osi-bg-item: #ffffff;

  /* Border colors */
  --osi-border-subtle: rgba(0, 0, 0, 0.06);
  --osi-border-default: rgba(0, 0, 0, 0.1);
  --osi-border-hover: rgba(255, 121, 0, 0.4);

  /* Text colors */
  --osi-text-primary: #1a1a1a;
  --osi-text-secondary: #4b5563;
  --osi-text-muted: #9ca3af;

  /* Apply to theme variables */
  --background: var(--osi-bg-base);
  --section-surface: var(--osi-bg-surface);
  --section-surface-hover: var(--osi-bg-elevated);
  --section-item-background: var(--osi-bg-item);
  --section-item-background-hover: var(--osi-bg-elevated);
  --ai-card-background: var(--osi-bg-base);
  --ai-card-background-hover: var(--osi-bg-elevated);
  --card-section-bg: var(--osi-bg-surface);

  /* Border theme */
  --section-border-color: var(--osi-border-subtle);
  --section-item-border-color: var(--osi-border-default);
  --card-border-color: var(--osi-border-subtle);

  /* Shadow for light theme */
  --section-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  --section-box-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.12);
  --section-item-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  --section-item-box-shadow-hover: 0 4px 8px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 121, 0, 0.15);
}

/* ============================================================================
   4. UNIFIED BACKGROUNDS - ALL SECTIONS & ITEMS USE SAME BACKGROUND
   ============================================================================ */

/*
 * BACKGROUND STRATEGY:
 * - ALL sections use: var(--section-surface)
 * - ALL section items use: var(--section-item-background)
 * - NO hardcoded colors, NO gradients, NO rgba values
 * - Theme switching changes CSS variables, not individual elements
 */

/* Force ALL sections to use unified background */
.masonry-item,
.ai-section,
.section-block,
.section-wrapper,
[class*="section-"] {
  background: var(--section-surface) !important;
  background-color: var(--section-surface) !important;
  background-image: none !important;

  &:hover {
    background: var(--section-surface-hover, var(--section-surface)) !important;
    background-color: var(--section-surface-hover, var(--section-surface)) !important;
  }
}

/* Force ALL section items/cards to use unified background */
.section-card,
.info-row,
.overview-card,
.analytics-metric,
.contact-card,
.event-card,
.event-item,
.financial-card,
.financial-metric,
.solution-card,
.solution-item,
.map-card,
.map-location,
.network-card,
.network-item,
.product-card,
.product-entry,
.product-reference,
.chart-card,
.chart-container,
.news-card,
.news-item,
.quotation-card,
.quotation-item,
.reference-card,
.reference-item,
.social-card,
.social-item,
.list-item,
.fallback-card,
.fallback-field,
[class*="-card"]:not([class*="__"]):not(.ai-card-surface),
[class*="-metric"]:not([class*="__"]),
[class*="-item"]:not([class*="__"]):not(.masonry-item),
[class*="-row"]:not([class*="__"]),
[class*="-entry"]:not([class*="__"]),
[class*="-field"]:not([class*="__"]) {
  background: var(--section-item-background) !important;
  background-color: var(--section-item-background) !important;
  background-image: none !important;

  &:hover {
    background: var(--section-item-background-hover, var(--section-item-background)) !important;
    background-color: var(--section-item-background-hover, var(--section-item-background)) !important;
  }
}

/* Hero card uses its own background level */
.ai-card-surface {
  background: var(--ai-card-background) !important;
  background-color: var(--ai-card-background) !important;
  background-image: none !important;

  &:hover {
    background: var(--ai-card-background-hover, var(--ai-card-background)) !important;
    background-color: var(--ai-card-background-hover, var(--ai-card-background)) !important;
  }
}

/* ============================================================================
   5. NO BORDERS - CLEAN MINIMAL DESIGN
   ============================================================================ */

/*
 * BORDER STRATEGY: NO BORDERS
 * - All items have NO borders for a clean, minimal look
 * - Focus state: orange ring for accessibility only
 */

/* Remove ALL borders from sections */
.masonry-item {
  border: none !important;
  border-left: none !important;
  border-right: none !important;
  border-top: none !important;
  border-bottom: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
  border-radius: var(--radius-lg, 12px) !important;

  &:hover {
    border: none !important;
    border-color: transparent !important;
  }
}

/* Remove ALL borders from section items */
.section-card,
.info-row,
.overview-card,
.analytics-metric,
.contact-card,
.event-card,
.event-item,
.financial-card,
.financial-metric,
.solution-card,
.solution-item,
.map-card,
.network-card,
.product-card,
.product-entry,
.product-reference,
.chart-card,
.fallback-card,
.fallback-field,
[class*="-card"]:not([class*="__"]):not(.ai-card-surface),
[class*="-metric"]:not([class*="__"]),
[class*="-item"]:not([class*="__"]):not(.masonry-item) {
  border: none !important;
  border-left: none !important;
  border-right: none !important;
  border-top: none !important;
  border-bottom: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
  border-radius: var(--radius-md, 8px) !important;

  &:hover {
    border: none !important;
    border-color: transparent !important;
  }
}

/* ============================================================================
   4b. REMOVE ALL BORDERS AND DECORATIVE ELEMENTS
   ============================================================================ */

/* Force remove ALL borders from ALL elements */
.masonry-item,
.ai-section,
.section-card,
.info-row,
.overview-card,
.analytics-metric,
.contact-card,
.event-card,
.event-item,
.financial-card,
.financial-metric,
.solution-card,
.solution-item,
.map-card,
.network-card,
.product-card,
.product-entry,
.product-reference,
.chart-card,
.fallback-card,
.fallback-field,
[class*="-card"],
[class*="-metric"],
[class*="-item"],
[class*="-row"] {
  /* NO BORDERS */
  border: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
  border-left: none !important;
  border-right: none !important;
  border-top: none !important;
  border-bottom: none !important;

  /* Remove decorative ::before pseudo-elements */
  &::before {
    display: none !important;
    content: none !important;
    width: 0 !important;
    height: 0 !important;
    border: none !important;
    background: none !important;
    opacity: 0 !important;
  }

  /* Remove ::after pseudo-elements too */
  &::after {
    border: none !important;
  }
}

/* Remove gradient backgrounds from pseudo-elements */
[class*="-card"]::before,
[class*="-metric"]::before,
[class*="-item"]:not(.masonry-item)::before,
[class*="-row"]::before {
  display: none !important;
  background: none !important;
  border: none !important;
}

/* ============================================================================
   4c. OVERRIDE ALL REMAINING BORDERS - NUCLEAR OPTION
   ============================================================================ */

/* Override standalone sections */
.ai-section:not(.masonry-item .ai-section),
.section-block,
.section-block:not(.masonry-item .section-block) {
  border: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

/* Override AI card surface border - the hero card */
.ai-card-surface,
.ai-card-renderer,
.ai-card,
[class*="ai-card"],
article[class*="card"] {
  border: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
  border-left: none !important;
  border-right: none !important;
  border-top: none !important;
  border-bottom: none !important;
  outline: none !important;

  &:hover {
    border: none !important;
    border-color: transparent !important;
    outline: none !important;
  }
}

/* Override any element with border classes */
[class*="border"],
[style*="border"] {
  border: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

/* Override all possible border inheritance */
* {
  --card-border: none;
  --section-border: none;
  --section-item-border: none;
  --theme-card-border: none;
  --theme-section-border: none;
  --theme-section-item-border: none;
  --ai-card-border: none;
  --ai-card-border-hover: none;
  --theme-ai-card-border: none;
  --theme-ai-card-border-hover: none;
  --hero-card-border: none;
  --hero-card-border-hover: none;
}

/* ============================================================================
   4d. OVERRIDE HERO CARD BORDERS SPECIFICALLY
   ============================================================================ */

/* Target the hero card container specifically */
.osi-card-container,
.card-preview-container,
.ai-card-wrapper,
.card-wrapper {
  border: none !important;

  > * {
    border: none !important;
  }
}

/* Override any inline styles that might add borders */
[style*="border"] {
  border: none !important;
  border-width: 0 !important;
  border-style: none !important;
  border-color: transparent !important;
}

/* ============================================================================
   5. REMOVE INDIVIDUAL SECTION OVERRIDES
   ============================================================================ */

/* These sections were setting custom backgrounds - remove them */
.ai-section--info,
.ai-section--analytics,
.ai-section--contact-card,
.ai-section--network-card,
.ai-section--map,
.ai-section--financials,
.ai-section--event,
.ai-section--list,
.ai-section--chart,
.ai-section--product,
.ai-section--solutions,
.ai-section--overview,
.ai-section--quotation,
.ai-section--text-reference,
.ai-section--brand-colors,
.ai-section--news,
.ai-section--social-media {
  /* Reset any custom backgrounds */
  background: transparent !important;

  .ai-section__body {
    background: transparent !important;
  }
}

/* ============================================================================
   6. NUCLEAR BACKGROUND OVERRIDE - CATCH ALL REMAINING HARDCODED BACKGROUNDS
   ============================================================================ */

/* Override ALL hardcoded backgrounds from individual section files */

/* Info section overrides */
.info-row,
.info-card,
.info-section-card {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Analytics section overrides */
.analytics-metric,
.analytics-card,
.performance-card {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Contact section overrides */
.contact-card,
.contact-item,
.contact-executive {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Event section overrides */
.event-card,
.event-item,
.event-row {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Financial section overrides */
.financial-card,
.financial-metric,
.financial-item {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Map section overrides */
.map-card,
.map-location,
.map-item {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Network section overrides */
.network-card,
.network-item,
.network-node {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Product section overrides */
.product-card,
.product-entry,
.product-item,
.product-reference,
.product-feature {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Solution section overrides */
.solution-card,
.solution-item,
.solution-entry {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Chart section overrides */
.chart-card,
.chart-container,
.chart-legend {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* News section overrides */
.news-card,
.news-item,
.news-article {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Quotation section overrides */
.quotation-card,
.quotation-item,
.quote-card {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Reference section overrides */
.reference-card,
.reference-item,
.text-reference-card {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Social media section overrides */
.social-card,
.social-item,
.social-link {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* List section overrides */
.list-card,
.list-item,
.list-entry {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Overview section overrides */
.overview-card,
.overview-item,
.overview-field {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Brand colors - special case, keep color backgrounds for swatches */
.brand-color-swatch {
  /* Keep actual color backgrounds for swatches */
}

/* Fallback section overrides */
.fallback-card,
.fallback-field,
.fallback-item {
  background: var(--section-item-background) !important;
  &:hover { background: var(--section-item-background-hover) !important; }
}

/* Remove any gradient backgrounds */
[class*="section-"][style*="background"],
[class*="-card"][style*="background"],
[class*="-item"][style*="background"],
[class*="-metric"][style*="background"] {
  background: var(--section-item-background) !important;
  background-image: none !important;
}

/* ============================================================================
   7. REDUCED MOTION SUPPORT
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  .masonry-item,
  .ai-section,
  .section-card,
  [class*="-card"],
  [class*="-metric"],
  [class*="-item"] {
    animation: none !important;
    transition: none !important;
  }
}

/* ============================================================================
   8. DEMO PAGE UI - Remove borders from selector buttons
   ============================================================================ */

/* Card type selector and variant selector - remove all borders */
.card-type-btn,
.card-type-wrapper,
.variant-selector,
.variant-selector button,
.card-type-selector,
.card-type-selector button,
app-card-type-selector,
app-card-type-selector > div,
.editor-toolbar__button {
  border: none !important;
}

/* Feature cards on home page */
.hero-feature-card,
.feature-card {
  border: none !important;
}

/* ============================================================================
   9. SECTION ITEM BORDER REMOVAL - All cards inside sections
   ============================================================================ */

/* Remove borders from all section items/cards */
.section-card,
.section-card--quotation,
.section-card--reference,
.section-card--metric,
.section-card--list,
.info-row,
.overview-card,
.analytics-metric,
.contact-card,
.event-card,
.event-item,
.financial-card,
.financial-metric,
.solution-card,
.solution-item,
.map-card,
.network-card,
.product-card,
.product-card--references,
.product-entry,
.product-reference,
.chart-card,
.chart-card--pie,
.chart-card--legend,
.fallback-card,
.fallback-field,
.location-card,
.office-card {
  border: none !important;
  outline: none !important;
}

