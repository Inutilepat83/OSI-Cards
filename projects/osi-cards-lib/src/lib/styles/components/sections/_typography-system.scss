// =====================================================================
// ENHANCED TYPOGRAPHY SYSTEM
// =====================================================================
//
// Comprehensive typography utilities with semantic naming.
// Uses design tokens for consistency and theme-ability.
//
// =====================================================================

@use "design-tokens" as *;

// =====================================================================
// HEADING MIXINS
// =====================================================================

@mixin heading-1 {
  font-size: var(--text-4xl);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: -0.02em;
  color: var(--foreground);
  margin: 0;
}

@mixin heading-2 {
  font-size: var(--text-3xl);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: -0.015em;
  color: var(--foreground);
  margin: 0;
}

// CONSISTENT HIERARCHY: Section headers and content headers
@mixin heading-3 {
  // Section Title (main section header)
  font-size: var(--text-xl); // Consistent: 19px
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: -0.01em;
  color: var(--foreground);
  margin: 0;
}

@mixin heading-4 {
  // Sub-section Title
  font-size: var(--text-lg); // Consistent: 17px
  font-weight: var(--font-semibold);
  line-height: var(--leading-snug);
  color: var(--foreground);
  margin: 0;
}

@mixin heading-5 {
  // Card/Item Title (consistent across all sections)
  font-size: var(--text-base); // Consistent: 13px
  font-weight: var(--font-semibold);
  line-height: var(--leading-normal);
  color: var(--foreground);
  margin: 0;
}

@mixin heading-6 {
  // Small Item Title / Label Header
  font-size: var(--text-sm); // Consistent: 11.2px
  font-weight: var(--font-semibold);
  line-height: var(--leading-normal);
  color: var(--foreground);
  margin: 0;
}

// =====================================================================
// BODY TEXT MIXINS
// =====================================================================

@mixin body-large {
  font-size: var(--text-lg);
  font-weight: var(--font-normal);
  line-height: var(--leading-relaxed);
  color: var(--foreground);
}

@mixin body-base {
  font-size: var(--text-base);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
  color: var(--foreground);
}

@mixin body-small {
  font-size: var(--text-sm);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
  color: var(--foreground);
}

@mixin body-xs {
  font-size: var(--text-xs);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
  color: var(--foreground);
}

// =====================================================================
// SEMANTIC TEXT VARIANTS
// =====================================================================

@mixin text-primary {
  color: var(--foreground);
  font-weight: var(--font-medium);
}

@mixin text-secondary {
  color: var(--muted-foreground);
  font-weight: var(--font-normal);
}

@mixin text-tertiary {
  color: var(--muted-foreground);
  font-weight: var(--font-normal);
  opacity: var(--opacity-70);
}

@mixin text-disabled {
  color: var(--muted-foreground);
  opacity: var(--state-disabled-opacity);
}

// =====================================================================
// LABEL & CAPTION MIXINS
// =====================================================================

@mixin label-base {
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--foreground);
  text-transform: none;
}

@mixin label-uppercase {
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  color: var(--muted-foreground);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

@mixin caption {
  font-size: var(--text-xs);
  font-weight: var(--font-normal);
  line-height: var(--leading-normal);
  color: var(--muted-foreground);
}

@mixin caption-bold {
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  line-height: var(--leading-normal);
  color: var(--muted-foreground);
}

// =====================================================================
// CODE & MONOSPACE
// =====================================================================

@mixin code-inline {
  font-family: "Monaco", "Courier New", monospace;
  font-size: 0.9em;
  padding: 2px 6px;
  background: var(--muted);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--foreground);
}

@mixin code-block {
  font-family: "Monaco", "Courier New", monospace;
  font-size: var(--text-sm);
  padding: var(--spacing-md);
  background: var(--muted);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  color: var(--foreground);
  overflow-x: auto;
  line-height: var(--leading-relaxed);
}

// =====================================================================
// LINK STYLES
// =====================================================================

@mixin link-base {
  color: var(--accent);
  text-decoration: none;
  font-weight: var(--font-medium);
  cursor: pointer;
  transition: color var(--duration-fast) var(--ease-out);

  &:hover {
    color: var(--accent);
    text-decoration: underline;
  }

  &:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
    border-radius: var(--radius-xs);
  }
}

@mixin link-subtle {
  color: var(--muted-foreground);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-out);

  &:hover {
    color: var(--foreground);
    text-decoration: underline;
  }
}

// =====================================================================
// NUMBER & STAT DISPLAY
// =====================================================================

@mixin number-display-large {
  font-size: var(--text-4xl);
  font-weight: var(--font-bold);
  line-height: var(--leading-tight);
  letter-spacing: -0.03em;
  color: var(--foreground);
  font-variant-numeric: tabular-nums;
}

@mixin number-display-medium {
  font-size: var(--text-2xl);
  font-weight: var(--font-semibold);
  line-height: var(--leading-tight);
  letter-spacing: -0.02em;
  color: var(--foreground);
  font-variant-numeric: tabular-nums;
}

@mixin number-display-small {
  font-size: var(--text-lg);
  font-weight: var(--font-semibold);
  line-height: var(--leading-snug);
  letter-spacing: -0.01em;
  color: var(--foreground);
  font-variant-numeric: tabular-nums;
}

// =====================================================================
// TRUNCATION UTILITIES
// =====================================================================

@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@mixin text-truncate-lines($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

// =====================================================================
// READING OPTIMIZATIONS
// =====================================================================

@mixin reading-optimized {
  font-feature-settings:
    "kern" 1,
    "liga" 1,
    "calt" 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

@mixin reading-width {
  max-width: 65ch; // Optimal reading width
  margin-left: auto;
  margin-right: auto;
}

// =====================================================================
// RESPONSIVE TYPOGRAPHY
// =====================================================================

@mixin fluid-type($min-size, $max-size, $min-width: 320px, $max-width: 1200px) {
  font-size: clamp(
    #{$min-size},
    calc(
      #{$min-size} + (#{strip-unit($max-size)} - #{strip-unit($min-size)}) *
        ((100vw - #{$min-width}) / (#{strip-unit($max-width)} - #{strip-unit($min-width)}))
    ),
    #{$max-size}
  );
}

@function strip-unit($number) {
  @if type-of($number) == "number" and not unitless($number) {
    @return $number / ($number * 0 + 1);
  }
  @return $number;
}

// =====================================================================
// SELECTION STYLING
// =====================================================================

@mixin selection-style {
  ::selection {
    background: var(--accent-color-30);
    color: var(--foreground);
  }

  ::-moz-selection {
    background: var(--accent-color-30);
    color: var(--foreground);
  }
}
