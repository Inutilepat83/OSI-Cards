<div class="timeline-section">
  @if (items.length > 0) {
    <div class="timeline">
      @for (item of items; track trackItem($index, item); let i = $index; let last = $last) {
        <div
          class="timeline-item"
          [class]="getStatusClass(item)"
          [class.timeline-item--last]="last"
          [style.--stagger-index]="getItemStaggerIndex(i)"
          [ngClass]="getItemAnimationClass(getItemId(item, i), i)"
          (click)="onItemClick(item)"
          (keydown.enter)="onItemClick(item)"
          tabindex="0"
          role="listitem">

          <!-- Timeline connector line -->
          <div class="timeline-line" [class.timeline-line--hidden]="last"></div>

          <!-- Timeline marker -->
          <div class="timeline-marker" [style.background-color]="item.color">
            <lucide-icon
              [name]="getTimelineIcon(item)"
              [size]="16"
              class="timeline-marker-icon">
            </lucide-icon>
          </div>

          <!-- Timeline content -->
          <div class="timeline-content">
            <!-- Date/time -->
            @if (formatDate(item) || formatTime(item)) {
              <div class="timeline-datetime">
                @if (formatDate(item)) {
                  <span class="timeline-date">{{ formatDate(item) }}</span>
                }
                @if (formatTime(item)) {
                  <span class="timeline-time">{{ formatTime(item) }}</span>
                }
              </div>
            }

            <!-- Title -->
            @if (item.title) {
              <h4 class="timeline-title">{{ item.title }}</h4>
            }

            <!-- Description -->
            @if (item.description) {
              <p class="timeline-description">{{ item.description }}</p>
            }

            <!-- Status badge -->
            @if (item.status) {
              <span class="timeline-status timeline-status--{{ item.status }}">
                {{ item.status }}
              </span>
            }
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="timeline-empty">
      <lucide-icon name="clock" [size]="24"></lucide-icon>
      <span>No timeline events</span>
    </div>
  }
</div>

