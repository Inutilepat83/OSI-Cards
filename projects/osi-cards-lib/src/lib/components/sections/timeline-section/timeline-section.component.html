<div class="ai-section ai-section--timeline section-content">
  <lib-section-header *ngIf="section.title" [title]="section.title" [description]="section.description">
  </lib-section-header>

  <div class="timeline-container" *ngIf="section.items?.length">
    <div
      class="timeline-item"
      *ngFor="let event of section.items; let i = index; let last = last"
      [class.expanded]="expandedIndex === i"
      role="button"
      tabindex="0"
      [attr.aria-expanded]="expandedIndex === i"
      (click)="toggleExpanded(i)"
      (keydown)="onItemKeydown($event, i)"
    >
      <div class="timeline-marker">
        <div class="timeline-dot"></div>
        <div class="timeline-line" *ngIf="!last"></div>
      </div>
      <div class="timeline-content">
        <div class="timeline-header">
          <h4 class="timeline-title">{{ event.title }}</h4>
          <span class="timeline-date" *ngIf="event.meta?.date">{{ event.meta?.date }}</span>
        </div>
        <p class="timeline-description" *ngIf="event.description">{{ event.description }}</p>
        <lib-badge *ngIf="event.meta?.type" variant="primary" size="sm">
          {{ event.meta?.type }}
        </lib-badge>
      </div>
    </div>
  </div>

  <lib-empty-state *ngIf="!section.items?.length" message="No timeline data" icon="ğŸ“…" variant="minimal">
  </lib-empty-state>
</div>
