<div class="ai-section ai-section--news section-content">
  <lib-section-header *ngIf="section.title" [title]="section.title" [description]="section.description">
  </lib-section-header>

  <div class="grid" *ngIf="section.items?.length">
    <!-- SMART: Adaptive height based on content -->
    <article
      class="card"
      *ngFor="let a of section.items; let i = index"
      [class.has-image]="getImageUrl(a)"
      [class.has-excerpt]="a.description"
    >
      <img [src]="getImageUrl(a)" [alt]="a.title" class="img" *ngIf="getImageUrl(a)" loading="lazy" />
      <div class="content">
        <div class="meta">
          <span *ngIf="a.meta?.date">{{ a.meta?.date }}</span>
          <span *ngIf="a.meta?.source">{{ a.meta?.source }}</span>
        </div>
        <h4 class="title">{{ a.title }}</h4>
        <div class="excerpt-wrapper" *ngIf="a.description">
          <p class="excerpt" [class.excerpt--expanded]="isExpanded(i)" *ngIf="a.description">
            {{ a.description }}
          </p>
          <button
            *ngIf="shouldShowExpandButton(a)"
            class="excerpt-expand-btn"
            type="button"
            (click)="toggleExpanded(i); $event.stopPropagation()"
            [attr.aria-expanded]="isExpanded(i)"
            [attr.aria-label]="(isExpanded(i) ? 'Collapse' : 'Expand') + ' article preview'"
          >
            {{ isExpanded(i) ? 'Show less' : 'Show more' }}
          </button>
        </div>
        <a [href]="a.meta?.url" class="link" *ngIf="a.meta?.url" target="_blank" rel="noopener">Read â†’</a>
      </div>
    </article>
  </div>

  <lib-empty-state *ngIf="!section.items?.length" message="No news data" icon="ðŸ“°" variant="minimal"> </lib-empty-state>
</div>
