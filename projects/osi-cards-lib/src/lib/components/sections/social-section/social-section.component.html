<div class="social-section">
  @if (items.length > 0) {
    <div class="social-feed">
      @for (item of items; track trackItem($index, item); let i = $index) {
        <article
          class="social-post"
          [class]="getPlatformClass(item.platform)"
          [style.--stagger-index]="getItemStaggerIndex(i)"
          [ngClass]="getItemAnimationClass(getItemId(item, i), i)"
          (click)="onPostClick(item)"
          (keydown.enter)="onPostClick(item)"
          tabindex="0">

          <!-- Post header -->
          <header class="social-post-header">
            <!-- Avatar -->
            <div class="social-avatar-wrapper">
              @if (item.avatar) {
                <img
                  [src]="item.avatar"
                  [alt]="getAuthorName(item)"
                  class="social-avatar">
              } @else {
                <div class="social-avatar social-avatar--initials">
                  {{ getInitials(item.author) }}
                </div>
              }

              <!-- Platform badge -->
              @if (item.platform) {
                <span class="social-platform-badge social-platform-badge--{{ item.platform }}">
                  <lucide-icon [name]="getPlatformIcon(item.platform)" [size]="10"></lucide-icon>
                </span>
              }
            </div>

            <!-- Author info -->
            <div class="social-author">
              <div class="social-author-name">
                {{ getAuthorName(item) }}
                @if (item.verified) {
                  <lucide-icon
                    name="badge-check"
                    [size]="14"
                    class="social-verified"
                    title="Verified">
                  </lucide-icon>
                }
              </div>
              @if (getHandle(item)) {
                <span class="social-handle">{{ getHandle(item) }}</span>
              }
            </div>

            <!-- Timestamp -->
            @if (item.timestamp) {
              <span class="social-timestamp">
                {{ formatTimestamp(item.timestamp) }}
              </span>
            }
          </header>

          <!-- Post content -->
          @if (getContent(item)) {
            <div class="social-content">
              {{ getContent(item) }}
            </div>
          }

          <!-- Media attachments -->
          @if (item.media && item.media.length > 0) {
            <div class="social-media" [class.social-media--multiple]="item.media.length > 1">
              @for (media of item.media; track media.url; let mediaIdx = $index) {
                @if (media.type === 'image') {
                  <img
                    [src]="media.url"
                    alt="Post media"
                    class="social-media-image"
                    loading="lazy">
                } @else if (media.type === 'video') {
                  <div class="social-media-video">
                    <lucide-icon name="play-circle" [size]="48"></lucide-icon>
                  </div>
                }
              }
            </div>
          }

          <!-- Post footer / engagement -->
          <footer class="social-footer">
            <button
              type="button"
              class="social-action social-action--like"
              (click)="onLike(item, $event)"
              [attr.aria-label]="'Like: ' + formatNumber(item.likes)">
              <lucide-icon name="heart" [size]="16"></lucide-icon>
              <span>{{ formatNumber(item.likes) }}</span>
            </button>

            <button
              type="button"
              class="social-action social-action--comment"
              (click)="onComment(item, $event)"
              [attr.aria-label]="'Comment: ' + formatNumber(item.comments)">
              <lucide-icon name="message-circle" [size]="16"></lucide-icon>
              <span>{{ formatNumber(item.comments) }}</span>
            </button>

            <button
              type="button"
              class="social-action social-action--share"
              (click)="onShare(item, $event)"
              [attr.aria-label]="'Share: ' + formatNumber(item.shares)">
              <lucide-icon name="repeat" [size]="16"></lucide-icon>
              <span>{{ formatNumber(item.shares) }}</span>
            </button>
          </footer>
        </article>
      }
    </div>
  } @else {
    <div class="social-empty">
      <lucide-icon name="rss" [size]="24"></lucide-icon>
      <span>No posts available</span>
    </div>
  }
</div>

