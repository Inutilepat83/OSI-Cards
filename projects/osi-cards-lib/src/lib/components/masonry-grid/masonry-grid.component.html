<div
  #container
  class="masonry-container"
  [class.masonry-container--ready]="isLayoutReady"
  [class.masonry-container--streaming]="isStreaming"
  [style.--masonry-columns]="currentColumns"
  [style.--masonry-gap.px]="gap"
  role="grid"
  [attr.aria-label]="'Masonry grid with ' + sectionsWithSpan.length + ' sections'"
>
  <div
    *ngFor="let item of sectionsWithSpan; let idx = index; trackBy: trackBySection"
    class="masonry-item"
    role="gridcell"
    [attr.data-index]="idx"
    [attr.data-col-span]="item.colSpan"
    [style.--col-span]="item.colSpan"
    [attr.aria-label]="'Section: ' + (item.section.title || 'Untitled')"
  >
    <app-section-renderer [section]="item.section" (sectionEvent)="onSectionEvent($event)"> </app-section-renderer>
  </div>
</div>
