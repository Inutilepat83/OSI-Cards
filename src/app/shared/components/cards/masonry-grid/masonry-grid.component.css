:host {
  display: block;
  width: 100%;
}

/* Masonry container loading states */
.masonry-container {
  transition: opacity 0.25s ease;
  opacity: 1;
  min-height: 400px;
  /* Better containment for absolute positioned items */
  contain: layout style paint;
}

.masonry-container--loading {
  opacity: 0.6;
}

/* Masonry items with smooth positioning */
.masonry-item {
  will-change: top, left;
  transition: top 0.35s cubic-bezier(0.4, 0, 0.2, 1), 
              left 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  /* Better rendering performance */
  backface-visibility: hidden;
  transform: translateZ(0);
}

/* Section streaming animation takes precedence over default opacity */
.masonry-item.section-streaming {
  /* Animation is handled by .section-streaming class from animations.scss */
  transition: top 0.35s cubic-bezier(0.4, 0, 0.2, 1), 
              left 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

.masonry-item.section-entered {
  /* Animation complete - ensure full opacity */
  opacity: 1;
  transition: top 0.35s cubic-bezier(0.4, 0, 0.2, 1), 
              left 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

.masonry-item--ready {
  /* Only apply default opacity transition if not using section streaming animation */
  transition: top 0.35s cubic-bezier(0.4, 0, 0.2, 1), 
              left 0.35s cubic-bezier(0.4, 0, 0.2, 1),
              opacity 0.45s ease 0.1s;
}

.masonry-item--ready:not(.section-streaming):not(.section-entered) {
  opacity: 1;
}

/* Ensure sections have proper containment */
.masonry-item > * {
  display: block;
  width: 100%;
  height: auto;
}

/* Responsive optimizations */
@media (max-width: 768px) {
  .masonry-container {
    min-height: 300px;
  }
  
  .masonry-item {
    /* Faster transitions on mobile for better responsiveness */
    transition: top 0.25s cubic-bezier(0.4, 0, 0.2, 1), 
                left 0.25s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.2s ease;
  }
  
  .masonry-item--ready {
    transition: top 0.25s cubic-bezier(0.4, 0, 0.2, 1), 
                left 0.25s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.3s ease 0.05s;
  }
}

/* Wide screen optimizations */
@media (min-width: 1400px) {
  .masonry-container {
    /* Allow more space on wide screens */
    min-height: 500px;
  }
}
