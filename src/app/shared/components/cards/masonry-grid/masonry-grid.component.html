<div
  #container
  class="relative w-full masonry-container"
  [class.masonry-container--loading]="!isLayoutReady"
  [style.height.px]="containerHeight"
  [style.gap.px]="gap"
  role="region"
  [attr.aria-label]="'Card sections grid with ' + sections.length + ' section' + (sections.length !== 1 ? 's' : '')"
  [attr.aria-busy]="!isLayoutReady"
>
  <div
    *ngFor="let item of (enableVirtualScrolling ? visibleSections : positionedSections); trackBy: trackItem; let idx = index"
    #itemRef
    class="absolute masonry-item"
    [class.masonry-item--ready]="isLayoutReady"
    [attr.id]="getSectionId(item?.section)"
    [ngStyle]="{
      position: 'absolute',
      left: item?.left || '0px',
      top: (item?.top || 0) + 'px',
      width: item?.width || '100%',
      zIndex: idx
    }"
  >
    <app-error-boundary>
      <app-section-renderer
        *ngIf="item?.section"
        [section]="item.section"
        (sectionEvent)="onSectionEvent($event)"
      ></app-section-renderer>
    </app-error-boundary>
  </div>
</div>
