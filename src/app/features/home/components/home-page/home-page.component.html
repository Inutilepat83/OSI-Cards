<main class="min-h-screen bg-background" role="main" aria-labelledby="osi-hero-heading">
  <div class="sr-only" [attr.role]="liveStatusRole" [attr.aria-live]="liveStatusTone" aria-atomic="true">
    {{ statusMessage }}
  </div>
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-container">
      <!-- Hero Header -->
      <div class="hero-header">
        <h1 class="hero-title" id="osi-hero-heading">
          <span class="hero-title-primary">Orange </span>
          <span class="hero-title-accent">Sales Intelligence</span>
        </h1>
        <p class="hero-description">
          OSI Cards is a versatile card generator used by sales intelligence agents.
          It features structured formatting that can design cards for any form of business intelligence data.
        </p>
      </div>

      <!-- Feature Cards Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-16 lg:mb-20">
        <!-- Feature Card 1 -->
        <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="sparkles" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]"></lucide-icon>
            </div>
            <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-foreground">AI-Powered Generation</h3>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Intelligent card generation with magnetic physics and interactive animations
            </p>
          </div>
        </div>

        <!-- Feature Card 2 -->
        <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="zap" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]"></lucide-icon>
            </div>
            <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-foreground">Instant Generation</h3>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Real-time conversion from JSON data to interactive business cards
            </p>
          </div>
        </div>

        <!-- Feature Card 3 -->
        <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg md:col-span-2 lg:col-span-1">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="code-2" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]"></lucide-icon>
            </div>
            <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-foreground">JSON Configuration</h3>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Simple, powerful JSON-driven card creation and customization
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

      <!-- Interactive Demo Section -->
      <div class="px-4 sm:px-6 py-2">
        <div class="mx-auto max-w-7xl">
          <div class="text-center mb-6 sm:mb-8">
            <h3 class="text-2xl sm:text-4xl font-bold text-foreground mb-4 sm:mb-6">Interactive Demo</h3>
          </div>
          
          <!-- Card Type Selector with Label -->
          <div class="flex flex-col sm:flex-row justify-center items-center gap-2 sm:gap-4 mb-4 sm:mb-6">
            <span class="text-sm text-muted-foreground">Card Type:</span>
            <div class="flex gap-2 sm:gap-3 flex-wrap justify-center">
              <button
                *ngFor="let type of cardTypes"
                (click)="onCardTypeChange(type)"
                [class]="'px-3 sm:px-4 py-2 rounded-lg font-medium transition-all duration-200 text-sm ' + (cardType === type ? 'bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg scale-105' : 'bg-card text-foreground border border-border hover:border-primary/50 hover:scale-105')"
                [disabled]="switchingType"
                type="button">
                  {{ type === 'sko' ? 'SKO' : type.charAt(0).toUpperCase() + type.slice(1) }}
              </button>
            </div>
          </div>

          <!-- Variant Selector -->
          <div class="flex flex-col sm:flex-row justify-center items-center gap-2 sm:gap-4 mb-6 sm:mb-8">
            <span class="text-sm text-muted-foreground">Variants:</span>
            <div class="flex gap-2 sm:gap-3 flex-wrap justify-center">
              <button
                *ngFor="let variant of [1, 2, 3]"
                (click)="onCardVariantChange(variant)"
                [class]="'px-3 sm:px-4 py-2 rounded-lg font-medium transition-all duration-200 text-sm ' + (cardVariant === variant ? 'bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg scale-105' : 'bg-card text-foreground border border-border hover:border-primary/50 hover:scale-105')"
                [disabled]="switchingType"
                [title]="'Load variant ' + variant + ' of ' + cardType + ' template'"
                type="button">
                {{ variant }}
              </button>
            </div>
          </div>

      <!-- Enhanced Responsive Layout with Fullscreen Support -->
      <div [ngClass]="'transition-all duration-500 ease-in-out mb-16 min-h-[800px] ' + (isFullscreen ? 'flex flex-col gap-8' : 'grid grid-cols-1 lg:grid-cols-5 gap-4 lg:gap-8')">
        
        <!-- Card Preview - Full width when fullscreen, otherwise responsive -->
        <div [ngClass]="'flex flex-col ' + (isFullscreen ? 'order-1 w-full' : 'lg:col-span-3 order-2 lg:order-2')">
          <div class="flex items-center gap-2 mb-5 flex-shrink-0 min-h-[28px]">
            <lucide-icon name="sparkles" [size]="20" class="text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
            <span class="font-semibold">Live Preview</span>
            <span *ngIf="generatedCard?.cardType" class="text-sm text-muted-foreground">
              â€¢ {{ generatedCard?.cardType }} Card
            </span>
            <span *ngIf="isFullscreen" class="bg-primary/20 text-primary border border-primary/30 ml-2 px-2 py-1 rounded text-xs font-semibold">
              Fullscreen Mode
            </span>
          </div>

          <div class="flex-1">
            <ng-container *ngIf="isGenerating || !isInitialized; else cardDisplay">
              <!-- Loading State -->
              <div class="flex flex-col items-center justify-center space-y-4 text-center py-20">
                <div class="w-8 h-8 animate-spin rounded-full border-2 border-primary border-t-transparent"></div>
                <div>
                  <p class="text-lg font-medium text-foreground">
                    {{ !isInitialized ? 'Initializing System...' : 'Generating Card...' }}
                  </p>
                  <p class="text-sm text-muted-foreground">
                    {{ !isInitialized ? 'Loading templates and services' : 'Processing your configuration' }}
                  </p>
                </div>
              </div>
            </ng-container>

            <ng-template #cardDisplay>
              <ng-container *ngIf="generatedCard; else emptyState">
                <!-- Card Display -->
                <div [ngClass]="'w-full ' + (isFullscreen ? 'max-w-none' : '')">
                  <app-card-preview
                    [generatedCard]="generatedCard"
                    [isGenerating]="isGenerating"
                    [isInitialized]="isInitialized"
                    [isFullscreen]="isFullscreen"
                    (fieldInteraction)="onFieldInteraction($event)"
                    (cardInteraction)="onCardInteraction($event)"
                    (fullscreenToggle)="onFullscreenToggle($event)">
                  </app-card-preview>
                </div>
              </ng-container>
            </ng-template>

            <ng-template #emptyState>
              <!-- Empty State -->
              <div class="flex flex-col items-center justify-center space-y-4 text-center py-20">
                <div class="w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center">
                  <lucide-icon name="code-2" [size]="32" class="text-muted-foreground" aria-hidden="true"></lucide-icon>
                </div>
                <div>
                  <p class="text-lg font-medium text-foreground mb-2">No Card Preview</p>
                  <p class="text-sm text-muted-foreground leading-relaxed max-w-md">
                    Enter a valid JSON configuration or select a template to see your card preview here.
                  </p>
                </div>
                <div class="flex flex-col gap-2 text-xs text-muted-foreground">
                  <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-green-500"></div>
                    <span>Valid JSON will auto-generate cards</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-blue-500"></div>
                    <span>Interactive effects respond to mouse</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-purple-500"></div>
                    <span>Export cards as high-quality PNG</span>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>
        </div>

        <!-- JSON Configuration - Full width when fullscreen, otherwise responsive -->
        <div [ngClass]="'flex flex-col ' + (isFullscreen ? 'order-2 w-full' : 'lg:col-span-2 order-1 lg:order-1')">
          <div class="flex items-center gap-2 mb-5 flex-shrink-0 min-h-[28px]">
            <lucide-icon name="code-2" [size]="20" class="text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
            <span class="font-semibold">JSON Configuration</span>
            <span *ngIf="!isJsonValid" class="bg-destructive/10 text-destructive border border-destructive/20 px-2 py-1 rounded text-xs font-semibold">
              Invalid JSON
            </span>
          </div>
          
          <!-- JSON Editor Card -->
          <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg p-4" style="height: calc(100vh - 80px);">
            <app-json-editor
              [jsonInput]="jsonInput"
              [jsonError]="jsonError"
              [isJsonValid]="isJsonValid"
              (jsonInputChange)="onJsonInputChange($event)">
            </app-json-editor>
            
            <div *ngIf="jsonError" class="mt-4 p-2 bg-red-500/10 border border-red-500/20 rounded text-sm text-red-400">
              <strong>JSON Error:</strong> {{ jsonError }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Features Section -->
  <div class="px-4 sm:px-6 py-12 sm:py-16 bg-muted/50">
    <div class="mx-auto max-w-6xl">
      <div class="text-center mb-12 sm:mb-16">
        <h3 class="text-2xl sm:text-3xl font-bold text-foreground mb-4">System Capabilities</h3>
        <p class="text-muted-foreground max-w-2xl mx-auto mb-12">
          Enterprise-grade features designed for modern sales intelligence workflows
        </p>
      </div>

      <div class="p-6 sm:p-8">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
          <div class="bg-card border border-border/50 hover:border-primary/50 transition-colors rounded-lg">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="zap" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
            </div>
            <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Real-time Generation</h4>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Instant card generation with live preview and JSON validation
            </p>
          </div>
        </div>

        <div class="bg-card border border-border/50 hover:border-primary/50 transition-colors rounded-lg">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="settings" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
            </div>
            <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Flexible Configuration</h4>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Multiple card types with customizable sections and fields
            </p>
          </div>
        </div>

        <div class="bg-card border border-border/50 hover:border-primary/50 transition-colors rounded-lg">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="download" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
            </div>
            <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">PNG Export</h4>
            <p class="text-muted-foreground text-sm leading-relaxed">
              High-quality PNG export with 2x scaling for presentations
            </p>
          </div>
        </div>

        <div class="bg-card border border-border/50 hover:border-primary/50 transition-colors rounded-lg">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="file-text" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
            </div>
            <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">TypeScript Support</h4>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Full TypeScript integration with comprehensive type definitions
            </p>
          </div>
        </div>

        <div class="bg-card border border-border/50 hover:border-primary/50 transition-colors rounded-lg">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="save" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
            </div>
            <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Save &amp; Load</h4>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Save your card configurations and load them anytime from local storage
            </p>
          </div>
        </div>

        <div class="bg-card border border-border/50 hover:border-primary/50 transition-colors rounded-lg">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="code-2" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
            </div>
            <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Component Architecture</h4>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Modular design with {{ systemStats.totalFiles }} documented components
            </p>
          </div>
        </div>
      </div>
      </div>
    </div>
  </div>
</main>