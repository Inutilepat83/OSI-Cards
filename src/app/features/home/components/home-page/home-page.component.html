<main class="min-h-screen bg-background" role="main" aria-labelledby="osi-hero-heading" id="main-content">
  <!-- Skip Links for Keyboard Navigation -->
  <div class="skip-links">
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#card-preview" class="skip-link">Skip to card preview</a>
    <a href="#json-editor" class="skip-link">Skip to JSON editor</a>
  </div>
  
  <div class="sr-only" [attr.role]="liveStatusRole" [attr.aria-live]="liveStatusTone" aria-atomic="true">
    {{ statusMessage }}
  </div>
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-container">
      <!-- Hero Header -->
      <div class="hero-header">
        <h1 class="hero-title" id="osi-hero-heading">
          <span class="hero-title-primary">Orange</span>
          <span class="hero-title-accent"> Sales Intelligence</span>
        </h1>
        <p class="hero-description">
          OrangeSales Intelligence OSI Cards is a versatile card generator used by sales intelligence agents. It features structured formatting that can design cards for any form of business intelligence data.
        </p>
      </div>

      <!-- Feature Cards Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-16 lg:mb-20">
        <!-- Feature Card 1 -->
        <div class="hero-feature-card">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="sparkles" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]"></lucide-icon>
            </div>
            <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-foreground">AI-Powered Generation</h3>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Intelligent card generation with magnetic physics and interactive animations
            </p>
          </div>
        </div>

        <!-- Feature Card 2 -->
        <div class="hero-feature-card">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="zap" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]"></lucide-icon>
            </div>
            <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-foreground">Instant Generation</h3>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Real-time conversion from JSON data to interactive business cards
            </p>
          </div>
        </div>

        <!-- Feature Card 3 -->
        <div class="hero-feature-card md:col-span-2 lg:col-span-1">
          <div class="p-6 sm:p-8 text-center">
            <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
              <lucide-icon name="code-2" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]"></lucide-icon>
            </div>
            <h3 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-foreground">JSON Configuration</h3>
            <p class="text-muted-foreground text-sm leading-relaxed">
              Simple, powerful JSON-driven card creation and customization
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

      <!-- Interactive Demo Section -->
      <div class="px-4 sm:px-6">
        <div class="mx-auto max-w-7xl">
          <div class="text-center mb-8 sm:mb-12">
            <h3 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-foreground mb-4 sm:mb-6" style="letter-spacing: -0.03em;">
              <span class="text-foreground">Interactive </span>
              <span class="text-[#FF7900]">Demo</span>
            </h3>
          </div>
          
          <!-- Card Type Selector with Label -->
          <div class="flex flex-col sm:flex-row justify-center items-center gap-3 sm:gap-4 mb-6 sm:mb-8">
            <span class="text-sm font-semibold text-muted-foreground">Card Examples:</span>
            <app-card-type-selector
              [selectedType]="cardType"
              [cardTypes]="cardTypes"
              [disabled]="switchingType"
              (typeChange)="onCardTypeChange($event)">
            </app-card-type-selector>
          </div>

          <!-- Variant Selector -->
          <div class="flex flex-col sm:flex-row justify-center items-center gap-3 sm:gap-4 mb-8 sm:mb-10" style="margin-bottom: 18px;">
            <span class="text-sm font-semibold text-muted-foreground">Variants:</span>
            <div class="variant-selector">
              <button
                *ngFor="let variant of variants"
                (click)="onCardVariantChange(variant)"
                [class.active]="cardVariant === variant"
                [disabled]="switchingType"
                [title]="'Load variant ' + variant + ' of ' + cardType + ' template'"
                type="button">
                {{ variant }}
              </button>
            </div>
          </div>

      <!-- Enhanced Responsive Layout with Fullscreen Support -->
      <div [ngClass]="'transition-all duration-500 ease-in-out mb-16 min-h-[800px] ' + (isFullscreen ? 'flex flex-col gap-4' : 'grid grid-cols-1 lg:grid-cols-5 gap-4 lg:gap-4 items-start')">
        
        <!-- Card Preview - Full width when fullscreen, otherwise responsive -->
        <div [ngClass]="'flex flex-col ' + (isFullscreen ? 'order-1 w-full' : 'lg:col-span-3 order-2 lg:order-2')" id="card-preview" tabindex="-1" style="align-self: stretch; margin-top: 0; padding-top: 0; overflow: visible;">
          <div class="preview-header-enhanced flex items-center justify-between gap-3 flex-shrink-0 min-h-[32px]" style="margin: 0; padding: 0; margin-bottom: 10px;">
            <div class="flex items-center gap-3">
              <div class="flex items-center gap-2">
                <lucide-icon name="sparkles" [size]="22" class="text-[#FF7900]" aria-hidden="true"></lucide-icon>
                <span class="font-bold text-lg" style="letter-spacing: -0.01em;">Live Preview</span>
              </div>
              <span *ngIf="jsonInput?.trim() !== ''" class="status-badge status-badge--live-edit">
                <span class="status-badge-dot"></span>
                Live edit
              </span>
              <span *ngIf="isGenerating" class="status-badge status-badge--generating">
                <span class="status-badge-spinner"></span>
                Generating...
              </span>
            </div>
            <app-preview-controls
              [isFullscreen]="isFullscreen"
              (toggleFullscreen)="toggleFullscreen()">
            </app-preview-controls>
          </div>

          <div class="flex-1 min-h-0" style="display: flex; flex-direction: column; padding-top: 0; padding-bottom: 2rem; overflow: visible;">
            <div [ngClass]="'w-full flex-1 min-h-0 ' + (isFullscreen ? 'max-w-none' : '')" style="display: flex; flex-direction: column; overflow: visible;">
              <app-card-preview
                [generatedCard]="generatedCard"
                [isGenerating]="isGenerating"
                [isInitialized]="isInitialized"
                [isFullscreen]="isFullscreen"
                (fieldInteraction)="onFieldInteraction($event)"
                (cardInteraction)="onCardInteraction($event)"
                (fullscreenToggle)="onFullscreenToggle($event)"
                (export)="onExportCard()"
                (agentAction)="onAgentAction($event)"
                (questionAction)="onQuestionAction($event)">
              </app-card-preview>
            </div>
          </div>
        </div>

        <!-- JSON Configuration - Full width when fullscreen, otherwise responsive -->
        <div [ngClass]="'flex flex-col ' + (isFullscreen ? 'order-2 w-full' : 'lg:col-span-2 order-1 lg:order-1')" id="json-editor" tabindex="-1" style="margin-top: 0; padding-top: 0;">
          <div class="preview-header-enhanced flex items-center gap-3 flex-shrink-0 min-h-[32px]" style="margin: 0; padding: 0; margin-bottom: 17px;">
            <div class="flex items-center gap-2">
              <lucide-icon name="code-2" [size]="22" class="text-[#FF7900]" aria-hidden="true"></lucide-icon>
              <span class="font-bold text-lg" style="letter-spacing: -0.01em;">JSON Configuration</span>
            </div>
            <span *ngIf="!isJsonValid" class="status-badge status-badge--error">
              <lucide-icon name="alert-circle" [size]="12" aria-hidden="true"></lucide-icon>
              Invalid JSON
            </span>
            <span *ngIf="isJsonValid && jsonInput?.trim()" class="status-badge status-badge--success">
              <lucide-icon name="check-circle-2" [size]="12" aria-hidden="true"></lucide-icon>
              Valid
            </span>
          </div>
          
          <!-- JSON Editor Card -->
          <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg p-4 flex flex-col flex-1 min-h-0" style="align-self: stretch; margin-top: 0;">
            <div class="json-editor flex flex-col">
              <!-- JSON Configuration Header -->
              <div class="editor-toolbar__actions">
                <div class="editor-toolbar__hint-stack">
                  <p id="json-editor-instructions" class="editor-toolbar__hint">
                    Tip: Press <span class="kbd">⌘⏎</span> or <span class="kbd">Ctrl⏎</span> to format JSON.
                  </p>
                </div>
                <div class="editor-toolbar__buttons">
                  <app-llm-simulation-controls
                    [isSimulating]="isSimulatingLLM"
                    [disabled]="isGenerating"
                    (simulationToggle)="onSimulateLLMStart()">
                  </app-llm-simulation-controls>
                </div>
              </div>

              <!-- JSON Editor Component -->
              <div class="json-editor-overlay" *ngIf="isGenerating" aria-hidden="true">
                <div class="json-editor-overlay__inner">
                  <svg class="spinner" viewBox="0 0 50 50" fill="none" stroke="currentColor" width="24" height="24">
                    <circle cx="25" cy="25" r="20" stroke-width="5" stroke-opacity="0.25"></circle>
                    <path d="M45 25a20 20 0 0 1-20 20" stroke-width="5" stroke-linecap="round"></path>
                  </svg>
                  <span>Loading template…</span>
                </div>
              </div>
              <app-json-editor
                [jsonInput]="jsonInput"
                (jsonInputChange)="onJsonInputChange($event)"
                (jsonValid)="onJsonValidChange($event)"
                (jsonErrorChange)="onJsonErrorChange($event)"
                (jsonErrorDetailsChange)="onJsonErrorDetailsChange($event)">
              </app-json-editor>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Features Section -->
  <!-- Features Section -->
  <div class="features-section">
    <div class="mx-auto max-w-6xl">
      <div class="text-center mb-12 sm:mb-16">
        <h3 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-foreground mb-4 sm:mb-6" style="letter-spacing: -0.03em;">
          <span class="text-foreground">System </span>
          <span class="text-[#FF7900]">Capabilities</span>
        </h3>
        <p class="text-muted-foreground max-w-2xl mx-auto text-lg sm:text-xl" style="line-height: 1.7;">
          Enterprise-grade features designed for modern sales intelligence workflows
        </p>
      </div>

      <div class="p-6 sm:p-8">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
          <div class="feature-card">
            <div class="p-6 sm:p-8 text-center">
              <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
                <lucide-icon name="zap" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
              </div>
              <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Real-time Generation</h4>
              <p class="text-muted-foreground text-sm leading-relaxed">
                Instant card generation with live preview and JSON validation
              </p>
            </div>
          </div>

          <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg">
            <div class="p-6 sm:p-8 text-center">
              <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
                <lucide-icon name="settings" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
              </div>
              <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Flexible Configuration</h4>
              <p class="text-muted-foreground text-sm leading-relaxed">
                Multiple card types with customizable sections and fields
              </p>
            </div>
          </div>

          <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg">
            <div class="p-6 sm:p-8 text-center">
              <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
                <lucide-icon name="download" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
              </div>
              <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">PNG Export</h4>
              <p class="text-muted-foreground text-sm leading-relaxed">
                High-quality PNG export with 2x scaling for presentations
              </p>
            </div>
          </div>

          <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg">
            <div class="p-6 sm:p-8 text-center">
              <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
                <lucide-icon name="file-text" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
              </div>
              <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">TypeScript Support</h4>
              <p class="text-muted-foreground text-sm leading-relaxed">
                Full TypeScript integration with comprehensive type definitions
              </p>
            </div>
          </div>

          <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg">
            <div class="p-6 sm:p-8 text-center">
              <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
                <lucide-icon name="save" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
              </div>
              <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Save &amp; Load</h4>
              <p class="text-muted-foreground text-sm leading-relaxed">
                Save your card configurations and load them anytime from local storage
              </p>
            </div>
          </div>

          <div class="bg-card border border-border/50 text-foreground hover:border-primary/50 transition-colors rounded-lg">
            <div class="p-6 sm:p-8 text-center">
              <div class="w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center">
                <lucide-icon name="code-2" [size]="32" class="w-8 h-8 sm:w-10 sm:h-10 text-[var(--color-brand)]" aria-hidden="true"></lucide-icon>
              </div>
              <h4 class="text-lg sm:text-xl font-semibold mb-3 sm:mb-4">Component Architecture</h4>
              <p class="text-muted-foreground text-sm leading-relaxed">
                Modular design with {{ systemStats.totalFiles }} documented components
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer Section -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-brand">
        <h4 class="footer-logo">OSI Cards</h4>
        <p class="footer-tagline">Premium Sales Intelligence</p>
      </div>
      <div class="footer-links">
        <div class="footer-column">
          <h5>Product</h5>
          <a routerLink="/features">Features</a>
          <a routerLink="/templates">Templates</a>
          <a routerLink="/pricing">Pricing</a>
        </div>
        <div class="footer-column">
          <h5>Resources</h5>
          <a routerLink="/docs">Documentation</a>
          <a routerLink="/api">API</a>
          <a routerLink="/support">Support</a>
        </div>
        <div class="footer-column">
          <h5>Company</h5>
          <a routerLink="/about">About</a>
          <a routerLink="/blog">Blog</a>
          <a routerLink="/contact">Contact</a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2024 OSI Cards. All rights reserved.</p>
    </div>
  </footer>

</main>