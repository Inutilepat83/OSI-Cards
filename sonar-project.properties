# SonarQube Configuration for OSI Cards
# Documentation: https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/

# Project identification
sonar.projectKey=osi-cards
sonar.projectName=OSI Cards
sonar.projectVersion=1.5.4

# Source code
sonar.sources=src,projects/osi-cards-lib/src
sonar.tests=src,projects/osi-cards-lib/src,e2e
sonar.test.inclusions=**/*.spec.ts,**/*.spec.js,e2e/**/*.ts

# Exclusions
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/*.spec.ts,\
  **/*.stories.ts,\
  **/testing/**,\
  **/mocks/**,\
  **/fixtures/**,\
  **/*.config.js,\
  **/*.config.ts,\
  **/polyfills.ts,\
  **/environment.ts,\
  **/environments/**,\
  **/assets/**,\
  **/*.md

# Test exclusions (don't count as production code)
sonar.coverage.exclusions=\
  **/*.spec.ts,\
  **/*.stories.ts,\
  **/testing/**,\
  **/mocks/**,\
  **/fixtures/**,\
  **/e2e/**

# Language
sonar.language=ts
sonar.sourceEncoding=UTF-8

# TypeScript
sonar.typescript.node=node
sonar.typescript.lcov.reportPaths=coverage/lcov.info
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# Coverage
sonar.coverage.exclusions=**/*.spec.ts,**/*.stories.ts
sonar.coverage.inclusions=**/*.ts

# Test execution
sonar.testExecutionReportPaths=test-results/sonar-report.xml

# Code Quality
sonar.issue.ignore.multicriteria=e1,e2,e3

# Rule exceptions
# e1: Disable cognitive complexity for tests
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.spec.ts

# e2: Disable max lines for generated files
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S104
sonar.issue.ignore.multicriteria.e2.resourceKey=**/generated*.ts

# e3: Allow console.warn and console.error
sonar.issue.ignore.multicriteria.e3.ruleKey=typescript:S2228
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.ts

# Quality Gates
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# Duplication
sonar.cpd.exclusions=**/*.spec.ts,**/*.stories.ts

# Analysis parameters
sonar.analysis.mode=publish

# External reports
sonar.eslint.reportPaths=eslint-report.json

# Links
sonar.links.homepage=https://github.com/Inutilepat83/OSI-Cards
sonar.links.ci=https://github.com/Inutilepat83/OSI-Cards/actions
sonar.links.issue=https://github.com/Inutilepat83/OSI-Cards/issues

# Quality profiles
# sonar.profile=OSI Cards Profile

# New Code Definition
sonar.newCode.referenceBranch=main

